apiVersion: codefresh.io/v1beta1
kind: Product
metadata:
  name: cf-101
spec:
  promotionFlows:
    - name: cf-101-flow
      gitTriggerSelectors:
        - key: commitMessage
          operator: In
          values:
            - '*promote*'
    - name: cf-101-flow
      gitTriggerSelectors:
        - key: commitMessage
          operator: In
          values:
            - promote
    - name: cf-101-flow
      gitTriggerSelectors:
        - key: gitRevision
          operator: In
          values:
            - main
  promotionTemplate:
    versionSource:
      file: version.yaml
      jsonPath: $.version
    promotion:
      version.yaml:
        jsonPaths:
          - $.version
      values.yaml:
        jsonPaths:
          - $.*.image
